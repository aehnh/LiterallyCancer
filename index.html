<!DOCTYPE html>
<html>
    <head>
        <title>Literally Canvas</title>
        <link href="/static/css/literallycanvas.css" rel="stylesheet">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, user-scalable=no" />

        <style type="text/css">
            *{
                margin: 0;
                padding: 0;
             }

            .fs-container {
                position: absolute;
                width: 100%;
                height: 100%;
                overflow: hidden;
            }

            .literally {
                width: 100%;
                height: 100%;
                position: relative;
            }

            #lc {
                width: 100%;
                height: 100%;
            }
        </style>
    </head>

    <body>
        <div class="fs-container">
            <div id="lc"></div>
        </div>

<!-- you really ought to include react-dom, but for react 0.14 you don't strictly have to. -->
<script src="/static/js/react-0.14.3.js"></script>
<script src="/static/js/literallycanvas.js"></script>
<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>

<script type="text/javascript">
    var socket = io();
    var lc = LC.init(document.getElementById("lc"), {
        imageURLPrefix: '/static/img',
        toolbarPosition: 'bottom',
        defaultStrokeWidth: 2,
        strokeWidths: [1, 2, 3, 5, 30],
        imageSize: {width: null, height: null}
    });
    lc.on('shapeSave', function() {
        var snapshotJSON = JSON.stringify(lc.getSnapshot());
        //console.log(snapshotJSON);
        socket.emit('json snapshot', JSON.stringify(lc.getSnapshot()));
    });
    lc.on('clear', function() {
        socket.emit('json snapshot', JSON.stringify(lc.getSnapshot()));
    });
    lc.on('undo', function() {
        socket.emit('json snapshot', JSON.stringify(lc.getSnapshot()));
    });
    lc.on('redo', function() {
        socket.emit('json snapshot', JSON.stringify(lc.getSnapshot()));
    });
    socket.on('json snapshot', function(msg) {
        console.log(msg);
        lc.loadSnapshot(JSON.parse(msg));
        //var canvas = LC.renderShapesToCanvas(LC.snapshotToShapes(msg), {x: 0, y: 0, width: 'infinite', height: 'infinite'}, canvas = lc);
        //lc = canvas;
    });
</script>
</body>
</html>
