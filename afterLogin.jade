//
   Created by q on 2017-01-10.

doctype html
html
    head
        title Home

        // stylesheet for grid theme
        link(rel='stylesheet', type='text/css', href='/static/css/main.css')
        link(href='/static/css/literallycanvas.css', rel='stylesheet')
        link(rel='stylesheet', type='text/css', href='/static/css/bootstrap.min.css')
        link(rel='stylesheet', type='text/css', href='/static/css/font-awesome.min.css')
        link(rel='stylesheet', href='/static/css/loginStyle.css')

        meta(charset='UTF-8')
        meta(name='viewport', content='width=device-width, user-scalable=no')
        style(type='text/css').
            *{
                margin: 0;
                padding: 0;
                font-family: Arial;
            }

            #masterfab {
                background: #ea4335;
                color: #ffffff;
                cursor: pointer;
                text-decoration: none;
            }

            .fab {
                background: #03A9F4;
                width: 64px;
                height: 64px;
                border-radius: 50%;
                text-align: center;
                vertical-align: middle;
                line-height: 64px;
                box-shadow: 0 0 3px rgba(0, 0, 0, 0.5), 3px 3px 3px rgba(0, 0, 0, 0.25);
                position: fixed;
                bottom: calc(1 / 4 * 3 * 64px);
                right: calc(1 / 4 * 3 * 64px);
                font-size: 24px;
                display: inline-block;
                cursor: default;
            }

            .fs-container {
                display: none;
                position: absolute;
                width: 100%;
                height: 100%;
                overflow: hidden;
            }

    body
        header.header
            .container
                .row.c-top
                    .col-md-12
                        .col-md-2.col-sm-3.col-xs-7
                            .logo
                                img(src='/static/img/logo.png', alt='logo')
                        .col-md-1.col-sm-2.col-xs-3
                            .menu
                        //Search bar
                        .col-md-6
                            .search
                                input#searchText.search-input(type='input')
                                span#searchButton.icon
                                    i.fa.fa-search
                        //Log in button
                        .col-md-3
                            .profile
                                //img.profile-photo(src='/static/img/user.png', alt='user')
                                //span.profile-username Welcome John
                                span#loginButton.profile-username Welcome, #{name}
                            //.login
                                .login-triangle
                                h2.login-header Log in
                                form.login-container
                                    p
                                        input(type='email', placeholder='Email')
                                    p
                                        input(type='password', placeholder='Password')
                                    p
                                        input(type='submit', value='Log in')
        .container
            .masonry-grid.row
                // Canvas grid item
                .col-md-12
                    each canvas in canvasList
                        .col-md-3.col-sm-5.grid-item
                            .c-card
                                a(target='_blank', href='/#{canvas._id}')
                                    .c-card__thumbnail
                                        if canvas.dataURL != null
                                            img(src='#{canvas.dataURL}', width='240', height='152')
                                        else
                                            img(src='/static/img/empty.png', width='240', height='152')
                                .c-card__name
                                    p #{canvas.title}
                                .c-card__description
                                    p
                                        | Description
        a#masterfab(target='_blank', href='/newToUser/#{facebookID}').fab
            img(src='/static/img/add.png')
        .fs-container
            #lc
        script(src='/static/js/react-0.14.3.js')
        script(src='/static/js/literallycanvas.js')
        script(src='http://code.jquery.com/jquery-3.1.1.js')
        script(src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js')
        script(src='/static/js/masonry.min.js')
        script(src='/static/js/grid.js')
        script(type='text/javascript').
            $('#masterfab').click(function (e) {
                document.getElementById('masterfab').href = '/newToUser/' + '#{facebookID}';
            });
            $('#searchText').bind("enterKey", function (e) {
                window.location = "http://ec2-52-78-120-94.ap-northeast-2.compute.amazonaws.com/home/" + '#{facebookID}' + '/' + '#{name}' + '/' + document.getElementById('searchText').value;
            });
            $('#searchText').keyup(function (e) {
                if (e.keyCode == 13) {
                    $(this).trigger("enterKey");
                }
            });
            $('#searchButton').click(function (e) {
                window.location = "http://ec2-52-78-120-94.ap-northeast-2.compute.amazonaws.com/home/" + '#{facebookID}' + '/' + '#{name}' + '/' + document.getElementById('searchText').value;
            });
            $('#masterfab').hover(
                function () {
                    document.getElementById("masterfab").style.boxShadow = '0 0 3px rgba(0, 0, 0, 0.5), 3px 3px 3px rgba(0, 0, 0, 0.5)';
                }, function () {
                    document.getElementById("masterfab").style.boxShadow = '0 0 3px rgba(0, 0, 0, 0.5), 3px 3px 3px rgba(0, 0, 0, 0.25)';
                }
            );
            $('.c-card__description').each(function(index) {
                $(this).on('dblclick', function () {
                    var prompted = prompt("Write description", this.value);
                    if (prompted != null) {
                        this.textContent = prompted;
                    }
                })
            });
            $('.c-card__name').each(function (index) {
                $(this).on('dblclick', function () {
                    var prompted = prompt("Change title", this.value);
                    if (prompted != null) {
                        this.textContent = prompted;
                    }
                })
            });